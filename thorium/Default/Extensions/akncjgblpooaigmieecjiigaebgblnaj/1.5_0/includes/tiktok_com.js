!function(t){function e(e){for(var n,r,s=e[0],l=e[1],d=e[2],f=0,u=[];f<s.length;f++)r=s[f],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&u.push(i[r][0]),i[r]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);for(c&&c(e);u.length;)u.shift()();return a.push.apply(a,d||[]),o()}function o(){for(var t,e=0;e<a.length;e++){for(var o=a[e],n=!0,s=1;s<o.length;s++){var l=o[s];0!==i[l]&&(n=!1)}n&&(a.splice(e--,1),t=r(r.s=o[0]))}return t}var n={},i={13:0},a=[];function r(e){if(n[e])return n[e].exports;var o=n[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=n,r.d=function(t,e,o){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(o,n,function(e){return t[e]}.bind(null,n));return o},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="";var s=window.savefromContentScriptWebpackJsonp=window.savefromContentScriptWebpackJsonp||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var d=0;d<s.length;d++)e(s[d]);var c=l;a.push([127,0]),o()}({115:function(t,e,o){"use strict";o.r(e);var n=o(31),i=o.n(n)()(!1);i.push([t.i,".jBOFD--container{position:absolute;z-index:10}.BJ-ZZ--sf__tooltip{display:block;outline:none;-webkit-user-select:none;user-select:none;cursor:default;position:absolute;z-index:10000;transition:opacity .25s;top:35px;left:2px;white-space:nowrap}.kXEuk--sf__tooltip__container{outline:none;font-family:Arial;font-size:14px;font-weight:700;background-color:#4d4d4d;border-radius:8px;color:#fff;padding:8px;margin-bottom:0;display:flex}.uvaWg--sf__tooltip__text{padding-top:6px}.gB5-Q--sf__tooltip__text__alt{margin-top:5px;display:inline-block}.GFrc0--sf__tooltip__button{margin:4px 4px 0;width:20px;height:18px;background-color:#000;border-radius:5px;border:solid #000;border-width:1px 1px 3px}.hdWNF--sf__tooltip__triangle{position:relative;left:8px;width:0;height:0;border-color:transparent transparent #4d4d4d;border-style:solid;border-width:0 8px 8px}.KE\\+w5--sf__tooltip__button_whiteground{fontWeight:bold;font-size:8px;text-align:center;z-index:1;position:relative;width:20px;height:18px;background-color:#fff;color:#000;border-radius:5px}.wCmWm--sf__tooltip__button_safari,.mwA8z--sf__tooltip__button_whiteground_safari{width:27px}.jBOFD--container.\\+Ncst--largeContainer{top:20px;left:145px}.jBOFD--container._0AmPQ--middleContainer{top:20px;left:20px}.jBOFD--container.xsLiH--feedItemContainer{top:10px;left:10px}.YBzmP--button{display:flex;align-items:center;justify-content:center;width:30px;height:30px;background-color:rgba(0,0,0,.5);border-radius:50%;z-index:9;border:1px solid hsla(0,0%,50.2%,.5)}.YBzmP--button a{padding:10px}",""]),i.locals={container:"jBOFD--container",sf__tooltip:"BJ-ZZ--sf__tooltip",sfTooltip:"BJ-ZZ--sf__tooltip",sf__tooltip__container:"kXEuk--sf__tooltip__container",sfTooltipContainer:"kXEuk--sf__tooltip__container",sf__tooltip__text:"uvaWg--sf__tooltip__text",sfTooltipText:"uvaWg--sf__tooltip__text",sf__tooltip__text__alt:"gB5-Q--sf__tooltip__text__alt",sfTooltipTextAlt:"gB5-Q--sf__tooltip__text__alt",sf__tooltip__button:"GFrc0--sf__tooltip__button",sfTooltipButton:"GFrc0--sf__tooltip__button",sf__tooltip__triangle:"hdWNF--sf__tooltip__triangle",sfTooltipTriangle:"hdWNF--sf__tooltip__triangle",sf__tooltip__button_whiteground:"KE+w5--sf__tooltip__button_whiteground",sfTooltipButtonWhiteground:"KE+w5--sf__tooltip__button_whiteground",sf__tooltip__button_safari:"wCmWm--sf__tooltip__button_safari",sfTooltipButtonSafari:"wCmWm--sf__tooltip__button_safari",sf__tooltip__button_whiteground_safari:"mwA8z--sf__tooltip__button_whiteground_safari",sfTooltipButtonWhitegroundSafari:"mwA8z--sf__tooltip__button_whiteground_safari",largeContainer:"+Ncst--largeContainer",middleContainer:"_0AmPQ--middleContainer",feedItemContainer:"xsLiH--feedItemContainer",button:"YBzmP--button"},e.default=i},127:function(t,e,o){"use strict";o.r(e);var n=o(0),i=o(11),a=o(25),r=o(15),s=o(19),l=o(29),d=o(20),c=o(22),f=o(4),u=o(9),_=o(1),p=o(91),m=o.n(p),v=o(33),b=o(28),g=o.n(b),h=o(13),x=o(21),y=_.c.memo((function(t){var e=t.url,o=t.filename,i=t.containerType,a=void 0===i?"middle":i,r=t.children,s=Object(v.a)(m.a),l=_.c.useState(!1),d=Object(u.a)(l,2),c=d[0],f=d[1],p=_.c.useState(!1),b=Object(u.a)(p,2),y=b[0],w=b[1],k=navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome"),S=_.c.useCallback((function(t){if(t.stopPropagation(),n.a.isFirefox){t.preventDefault();var i=e;return Object(x.a)({action:"ffTiktokDownloadMedia",downloadFileUrl:i,filename:o})}t.altKey||n.a.isFirefox?Object(h.a)({category:"download",subcategory:"ti",event:"video"}):(y||(w(!0),setTimeout((function(){w(!1)}),2e3)),t.preventDefault())}),[y]),j=_.c.useCallback((function(t){t.altKey||t.ctrlKey||n.a.isFirefox||f(!c)}),[c]),O=_.c.useMemo((function(){return"large"===a?s.largeContainer:"middle"===a?s.middleContainer:"feedItem"===a?s.feedItemContainer:""}),[a]);return _.c.createElement("div",{className:g()(s.container,O)},_.c.createElement("div",{className:s.button},n.a.isFirefox?_.c.createElement("a",{onclick:S},r):_.c.createElement("a",{href:e,download:o,target:"_blank",onclick:S,onmouseenter:j,onmouseleave:j},r),c&&_.c.createElement("div",{className:g()(s.sf__tooltip)},_.c.createElement("div",{className:g()(s.sf__tooltip__triangle)}),_.c.createElement("div",{className:g()(s.sf__tooltip__container)},_.c.createElement("span",{className:g()(s.sf__tooltip__text)},"Hold"),_.c.createElement("div",{className:g()(s.sf__tooltip__button,k?s.sf__tooltip__button_safari:"")},_.c.createElement("div",{className:g()(s.sf__tooltip__button_whiteground,k?s.sf__tooltip__button_whiteground_safari:"")},_.c.createElement("span",{className:g()(s.sf__tooltip__text__alt)},k?"option":"alt"))),_.c.createElement("span",{className:g()(s.sf__tooltip__text)},"and click")))))})),w=o(8),k=o(2),S=o(16),j=Object(i.a)("tiktok_com");a.a.isSingle()&&Object(d.b)("tiktok",(function(t,e){var o=Object(s.a)(e),i=e.preferences,a=i.moduleTiktok,d=location.pathname.includes("/embed");n.a.onMessage.addListener((function(e,o,n){if("getModuleInfo"===e.action){if(e.url!==location.href)return;return n({state:a,moduleName:t})}if("changeState"===e.action){if(t!==e.moduleName)return;return u.changeState(e.state)}"updatePreferences"!==e.action||Object.assign(i,e.preferences)})),a&&setTimeout((function(){u.run()}));var u={style:void 0,run:function(){a=1,d?r.a.isAvailable()&&_.mutationMode.start():r.a.isAvailable()&&(this.mutationMode.start(),this.injectStyle())},mutationMode:{observer:null,start:function(){if(this.observer)return this.observer.start();this.observer=new r.a({queries:[{css:['.feed-item-content video, [class*="-DivBasicPlayerWrapper"] video','div[data-e2e="browse-video"] video[src]',".video-box video[src]",".video-card video[src]",'.feed-item-content video, [class*="-DivBasicPlayerWrapper"] video','div[data-e2e="browse-video"] video'],is:"added",callback:function(t){for(var e,o=0;e=t.added[o];o++)e.dataset.sfSkip>0||(e.dataset.sfSkip="1",u.runDesktop(e))}},{css:['div[data-e2e="feed-video"] video[src]'],is:"added",callback:function(t){t.added.forEach((function(t){t.dataset.sfSkip||(t.dataset.sfSkip="1",u.addButtonForFeedItem(t))}))}}]})},stop:function(){this.observer&&this.observer.stop(),document.querySelectorAll(".sf-dl-container, .sf-feed-dl-container").forEach((function(t){t.remove()})),u.style&&u.style.remove(),["sfSkip","sfReady"].forEach((function(t){for(var e,o=Object(l.a)(t),n=document.querySelectorAll("["+o+"]"),i=0;e=n[i];i++)e.removeAttribute(o)}))}},addButtonForFeedItem:function(t){var e=t.closest(".item-video-container");if(e){var o=document.createElement("div");o.classList.add("sf-feed-dl-container"),u.createDownloadButton(o,"video.mp4",t.src,"feedItem"),e.appendChild(o)}},runDesktop:function(t){if(!t)return j.error("videoElement don't found");var e=document.querySelector(".user-username, .share-title"),o=e&&e.textContent?w.a.modify(e.textContent+".mp4"):"video.mp4";if(!o){var n=location.href.match(/\d+/);o=n&&n[0]?n[0]:"video.mp4"}var i=t.parentElement,a="middle";if((t.closest('div[data-e2e="feed-video"]')||t.closest('div[data-e2e="user-post-item-list"]'))&&(a="feedItem"),t.closest('div[data-e2e="browse-video"]')&&(a="large"),i&&!i.dataset.sfReady){i.dataset.sfReady=String(1);var r=document.createElement("div");r.classList.add("sf-dl-container"),i.appendChild(r),u.createDownloadButton(r,o,t.src,a)}},createDownloadButton:function(t,e,n,i){return Object(h.a)({category:"append",subcategory:"ti",event:"b"}),Object(c.a)(Object(f.e)(y,{url:n,filename:e,containerType:i},[Object(f.e)("img",{src:o.svg.getSrc("download","#fff")})]),t)},injectStyle:function(){this.style=k.a.create("style",{text:Object(S.a)({".sf-dl-container":{display:"none"},"[class*=-DivVideoContainer]:hover .sf-dl-container":{display:"block"},'[data-sf-ready="1"]:hover .sf-dl-container':{display:"block"}})}),document.body.appendChild(this.style)},changeState:function(t){a=t,this.mutationMode.stop(),t&&this.run()}},_={mutationMode:{observer:null,start:function(){if(this.observer)return this.observer.start();this.observer=new r.a({queries:[{css:"._embed_player_video-wrapper",is:"added",callback:function(t){for(var e,o=0;e=t.added[o];o++)e.dataset.sfSkip>0||(e.dataset.sfSkip="1",_.insertDownloadButton(e))}}]})}},insertDownloadButton:function(t){if(!t.dataset.sfReady){var e;t.dataset.sfReady=String(1);var o=document.querySelector("._embed_video_card-user span"),n=o&&o.textContent?w.a.modify(o.textContent+".mp4"):"video.mp4";t.addEventListener("mouseenter",(function(){var o=document.querySelector("video");o&&(e=u.createDownloadButton(t,n,o.src,"large"))})),t.addEventListener("mouseleave",(function(){e&&e()}))}}}}))},91:function(t,e,o){var n=o(43),i=o(115);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[t.i,i,""]]);var a,r=0,s={injectType:"lazyStyleTag",insert:"head",singleton:!1},l={};l.locals=i.locals||{},l.use=function(){return r++||(a=n(i,s)),l},l.unuse=function(){r>0&&!--r&&(a(),a=null)},t.exports=l}});